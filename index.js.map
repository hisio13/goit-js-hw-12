{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = \"https://pixabay.com\";\nconst endPoint = \"/api\";\n\nexport function getImg(searchName, page = 1, perPage = 40) {\n    const params = new URLSearchParams({\n        key: '48827773-420cc6a3931f90379a2431d96',\n        q: searchName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage,\n    });\n\n    const url = `${baseUrl}${endPoint}?${params}`;\n    return axios.get(url);\n}\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: 'alt',\n    captionDelay: 250,\n    close: 'true',\n});\n\nexport function displayImages(images) {\n    const gallery = document.getElementById('gallery');\n    \n    const markup = images.map(image => \n        `<li class=\"gallery-item\">\n            <a class='gallery-link' href=\"${image.largeImageURL}\">\n                <img class=\"li-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"/> \n                <div class=\"li-text\">\n                    <table class=\"table\">\n                        <tr>\n                            <td>Likes</td>\n                            <td>Views</td>\n                            <td>Comments</td>\n                            <td>Downloads</td>\n                        </tr>\n                        <tr>\n                            <td>${image.likes}</td>\n                            <td>${image.views}</td>\n                            <td>${image.comments}</td>\n                            <td>${image.downloads}</td>\n                        </tr>\n                    </table>\n                </div>\n            </a>\n        </li>`\n    ).join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup); \n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    const gallery = document.getElementById('gallery');\n    gallery.innerHTML = '';\n    document.getElementById('loadMore').style.display = 'none'; \n}\n\nexport function showLoadingIndicator() {\n    document.getElementById('loading').style.display = 'block';\n}\n\nexport function hideLoadingIndicator() {\n    document.getElementById('loading').style.display = 'none';\n}\n\nexport function toggleLoadMoreButton(show) {\n    document.getElementById('loadMore').style.display = show ? 'block' : 'none';\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImg } from \"./js/pixabay-api.js\";\nimport { displayImages, clearGallery, showLoadingIndicator, hideLoadingIndicator, toggleLoadMoreButton } from \"./js/render-functions.js\";\n\nexport const form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input-search\");\nconst waitMsg = document.querySelector(\".wait-msg\");\n\nlet currentPage = 1; \nlet searchTerm = ''; \nform.addEventListener(\"submit\", (e) => {\n    e.preventDefault();  \n\n    clearGallery();\n    waitMsg.innerHTML = '\"Wait, the image is loading\" <span class=\"loader\"></span>';\n  \n    const searchName = input.value.trim();\n    \n    if (!searchName) {\n        iziToast.show({\n            backgroundColor: 'rgba(239, 64, 64, 1)',\n            messageColor: `rgba(255, 255, 255, 1)`,\n            close: `true`,\n            position: \"topRight\",\n            title: 'Error',\n            titleColor: '#fff',\n            titleSize: '16px',\n            message: 'Input search string'\n        });\n        waitMsg.textContent = \"\";\n        return;\n    }\n\n    if (searchName !== searchTerm) {\n        searchTerm = searchName; \n        currentPage = 1; \n    } else {\n        currentPage++; \n    }\n  \n    fetchImages(searchTerm);\n});\n\ndocument.getElementById('loadMore').addEventListener('click', () => {\n    currentPage++; \n    fetchImages(searchTerm);\n});\n\nfunction fetchImages(searchTerm) {\n    showLoadingIndicator(); \n    getImg(searchTerm, currentPage)\n        .then(response => {\n            const images = response.data.hits; \n            const totalHits = response.data.totalHits; \n\n            if (images.length === 0) {\n                iziToast.show({\n                    backgroundColor: 'rgba(239, 64, 64, 1)',\n                    messageColor: `rgba(255, 255, 255, 1)`,\n                    close: `true`,\n                    position: \"topRight\",\n                    title: 'Error',\n                    titleColor: '#fff',\n                    titleSize: '16px',\n                    message: 'Sorry, there are no images matching your search query. Please try again!'\n                });\n                toggleLoadMoreButton(false); \n            } else {\n                displayImages(images); \n                toggleLoadMoreButton(currentPage * 40 < totalHits); \n            }\n            waitMsg.textContent = \"\";\n        })\n        .catch(error => {\n            waitMsg.textContent = 'Ups ...';\n            console.log(error);\n        })\n        .finally(() => {\n            hideLoadingIndicator(); \n        });\n}\n"],"names":["baseUrl","endPoint","getImg","searchName","page","perPage","params","url","axios","lightbox","SimpleLightbox","displayImages","images","gallery","markup","image","clearGallery","showLoadingIndicator","hideLoadingIndicator","toggleLoadMoreButton","show","form","input","waitMsg","currentPage","searchTerm","e","iziToast","fetchImages","response","totalHits","error"],"mappings":"owBAEA,MAAMA,EAAU,sBACVC,EAAW,OAEV,SAASC,EAAOC,EAAYC,EAAO,EAAGC,EAAU,GAAI,CACvD,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CAClB,CAAK,EAEKE,EAAM,GAAGP,CAAO,GAAGC,CAAQ,IAAIK,CAAM,GAC3C,OAAOE,EAAM,IAAID,CAAG,CACxB,CCdA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,MAAO,MACX,CAAC,EAEM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAE3CC,EAASF,EAAO,IAAIG,GACtB;AAAA,4CACoCA,EAAM,aAAa;AAAA,2CACpBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAU/CA,EAAM,KAAK;AAAA,kCACXA,EAAM,KAAK;AAAA,kCACXA,EAAM,QAAQ;AAAA,kCACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,cAMjD,EAAM,KAAK,EAAE,EAETF,EAAQ,mBAAmB,YAAaC,CAAM,EAE9CL,EAAS,QAAO,CACpB,CAEO,SAASO,GAAe,CAC3B,MAAMH,EAAU,SAAS,eAAe,SAAS,EACjDA,EAAQ,UAAY,GACpB,SAAS,eAAe,UAAU,EAAE,MAAM,QAAU,MACxD,CAEO,SAASI,GAAuB,CACnC,SAAS,eAAe,SAAS,EAAE,MAAM,QAAU,OACvD,CAEO,SAASC,GAAuB,CACnC,SAAS,eAAe,SAAS,EAAE,MAAM,QAAU,MACvD,CAEO,SAASC,EAAqBC,EAAM,CACvC,SAAS,eAAe,UAAU,EAAE,MAAM,QAAUA,EAAO,QAAU,MACzE,CCrDO,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIC,EAAc,EACdC,EAAa,GACjBJ,EAAK,iBAAiB,SAAWK,GAAM,CACnCA,EAAE,eAAc,EAEhBV,IACAO,EAAQ,UAAY,4DAEpB,MAAMpB,EAAamB,EAAM,MAAM,KAAI,EAEnC,GAAI,CAACnB,EAAY,CACbwB,EAAS,KAAK,CACV,gBAAiB,uBACjB,aAAc,yBACd,MAAO,OACP,SAAU,WACV,MAAO,QACP,WAAY,OACZ,UAAW,OACX,QAAS,qBACrB,CAAS,EACDJ,EAAQ,YAAc,GACtB,MACH,CAEGpB,IAAesB,GACfA,EAAatB,EACbqB,EAAc,GAEdA,IAGJI,EAAYH,CAAU,CAC1B,CAAC,EAED,SAAS,eAAe,UAAU,EAAE,iBAAiB,QAAS,IAAM,CAChED,IACAI,EAAYH,CAAU,CAC1B,CAAC,EAED,SAASG,EAAYH,EAAY,CAC7BR,IACAf,EAAOuB,EAAYD,CAAW,EACzB,KAAKK,GAAY,CACd,MAAMjB,EAASiB,EAAS,KAAK,KACvBC,EAAYD,EAAS,KAAK,UAE5BjB,EAAO,SAAW,GAClBe,EAAS,KAAK,CACV,gBAAiB,uBACjB,aAAc,yBACd,MAAO,OACP,SAAU,WACV,MAAO,QACP,WAAY,OACZ,UAAW,OACX,QAAS,0EAC7B,CAAiB,EACDR,EAAqB,EAAK,IAE1BR,EAAcC,CAAM,EACpBO,EAAqBK,EAAc,GAAKM,CAAS,GAErDP,EAAQ,YAAc,EAClC,CAAS,EACA,MAAMQ,GAAS,CACZR,EAAQ,YAAc,UACtB,QAAQ,IAAIQ,CAAK,CAC7B,CAAS,EACA,QAAQ,IAAM,CACXb,GACZ,CAAS,CACT"}